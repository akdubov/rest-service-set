apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: rest-service-server-route
spec:
  hosts:
    - rest-service-server.rest-service-test.svc.cluster.local
  gateways:
    - mesh
  http:
  - name: privileged
    match:
    - sourceLabels:
        app: rest-client-privileged
    route:
    - destination:
        host: rest-service-server.rest-service-test.svc.cluster.local
        subset: privileged

  - name: default
    route:
    - destination:
        host: rest-service-server.rest-service-test.svc.cluster.local
        subset: regular
